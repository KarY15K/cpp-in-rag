# 音视频面试题

# 音视频开发高频面试题


1.为什么巨大的原始视频可以编码成很小的视频呢?这其中的技术是什么呢?



1）空间冗余：图像相邻像素之间有较强的相关性



2）时间冗余：视频序列的相邻图像之间内容相似



3）编码冗余：不同像素值出现的概率不同



4）视觉冗余：人的视觉系统对某些细节不敏感



5）知识冗余：规律性的结构可由先验知识和背景知识得到



2.怎么做到直播秒开优化？



+ DNS 解析慢 为了有效降低 DNS 解析对首开的影响，我们可以提前完成播放域名->IP 地址的解析， 并缓存起 来， 播放的时候，直接传入带 IP 地址的播放地址，从而省去了 DNS 解析的耗时。 如果要支持用 IP 地址播放， 是需 要修改底层 ffffmpeg 源码的。
+ 播放策略 很多侧重点播的播放器，为了减少卡顿，会有一些缓冲策略，当缓冲足够多的数据之后 ，再送入解码播放。 而为了加快首开效果，需要对播放的缓冲策略做一些调整，如果第一帧还没有渲染出来的情况下， 不要做任何缓冲，直接送入解码器解码播放，这样就可以保证没有任何因为「主动」缓冲带来的首开延时。
+ 播放参数设置 所有基于 ffffmpeg 的播放器，都会遇到avformat_fifind_stream_info这个函数耗时比较久， 从而增大了首开时间，该函数主要作用是通过读取一定字节的码流数据， 来分析码流的基本信息，如编码信息、时长、码率、帧率等等，它由两个参数来控制其读取的数据量大小和时长， 一个是 probesize，一个是analyzeduration。 减少 probesize 和 analyzeduration 可以有效地减少avformat_fifind_stream_info的函数耗时， 从而加快首开，但是需要注意的是，设置地太小可能会导致读取的数据量不足，从而无法解析出码流信息，导致播放失败， 或者出现只有音频没有视频，只有视频没有音频的问题。
+ 服务端优化
+ 服务器关键帧缓冲
+ CDN最近策略



3.数字图像滤波有哪些方法？



+ 均值滤波（邻域平均法）、中值滤波（消除独立的噪声点）、高斯滤波（线性平滑滤波，消除高斯噪声，对整幅图像进行 加权平均，每一个像素点的值都由其本身和邻域内的其他像素值经过加权平均后得到）、KNN滤波、高通滤波、低通滤波 等。



4.图像可以提取的特征有哪些？



+ 颜色、纹理（粗糙度、方向度、对比度）、形状（曲率、离心率、主轴方向）、色彩等。



5.衡量图像重建好坏的标准有哪些？怎样计算？



+  SNR（信噪比） 
+  PSNR=10*log10((2<sup>n-1)</sup>2/MSE) （MSE是原图像与处理图像之间均方误差，所以计算PSNR需要2幅图像的数据！） 
+  SSIM （结构相似性分别从亮度对比度、对比度、结构3方面度量图像的相似性） 



6.AAC和PCM的区别？



+ AAC在数据开始时候加了一些参数：采样率、声道、采样大小



7.H264存储的两个形态？



+  a. Annex B : StartCode ：NALU单元，开头一般是0001或者001 防竞争字节：为了区分 0 0 0 1，它采用0 0 0 0x3 1作为区分 多用于网络流媒体中：rtmp、rtp格式 
+  b. AVCC : 表示NALU长度的前缀，不定长用4、2、1来存储这个NALU的长度 防竞争字节 多用于文件存储中mp4的格式 



8.请叙述MPEG视频基本码流结构？



+  Sequence Header 
+  Sequence Extention 
+  Group of picture Header 
+  Picture Header 
+  Picture coding extension 



# 声网面经（linux流媒体c++开发）


个人状况：工作两年，社招，双非本科，没想到给了面试机会  
面试题：  
先自我介绍，然后让介绍自己做过的项目。根据项目问了些问题。  
音视频：  
1、flv报文分析。具体到某个字段在哪存（时间戳，编码字段具体放在哪的）  
2、rtmp交互流程（rtmp握手、建立网络连接、建立流，播放），rtmp直播推流经过哪些环节（摄像头采集、音频编码、视频编码、flv封装、rtmp封装、推流到服务器）  
3、rtmp的握手过程  
4、rtmp停止推流发送什么指令（没回答上来，当时说实际使用停止推流就是直接不推。后来查了，应该是FCPublish 和FCUnpublish 指令）  
5、h.264帧类型，并详细说明  
6、I帧和IDR帧区别  
7、GOP开放模式和封闭模式的使用场景及如何选择  
8、h.264的码率控制模式（只知道可编码率和固定码率），讲一讲区别以及使用场景  
9、yuv420P在内存中的排列方式  
10、yuv420p和nv12的区别（忘了nv12是半平面模式，没回答上来）  
11、h.264裸流分析（vcl层和nal层分析）  
12、两个h.264包，是怎么识别是两个包的（没听懂啥意思）  
13、SPS和PPS是干什么的  
C++：  
1、c++11新特性有哪些  
2、介绍一下智能指针有哪些？shared_ptr底层数据结构如何实现的？shared_ptr是线程安全的吗（没回答上来）。shared_ptr和weak_ptr来构造有什么区别（没理解啥意思，就回答了weak_ptr不会引起计数器的增加）  
3、什么是左值引用？int &&a=10;和int &&a=b;（int b=10）的区别（这个问题以前分析过，但是忘了）  
4、lambda表达的的捕获方式有哪几种？值捕获能否修改捕获的值（要加mutable才能修改）。lambda中访问一个static int a;是否需要先捕获它  
5、lambda和std::function的区别（没get到面试官问的点，就回答临时用就用的lambda，后续需要继续用就用std::function）  
最后，手撕翻转链表  
面完总体感觉自己面得一般，声网是在投递后一周给的面试通知，有些东西没准备全。面试官人还不错，但有些问题没懂啥意思。感觉面试官想完成个任务就走人。反问环节只问了什么时候通知（面试官说不知道），又问一共多少面（回答三面以上）



# 参考地址


[https://www.nowcoder.com/discuss/458315162391453696?sourceSSR=search](https://www.nowcoder.com/discuss/458315162391453696?sourceSSR=search)



[https://www.nowcoder.com/feed/main/detail/38a87df1514f48b187cc7e2234656b73?sourceSSR=search](https://www.nowcoder.com/feed/main/detail/38a87df1514f48b187cc7e2234656b73?sourceSSR=search)



> 更新: 2024-04-19 15:35:13  
> 原文: <https://www.yuque.com/linuxer/gscfv1/64584d5c6aa5cd9d75cde139c2182913>