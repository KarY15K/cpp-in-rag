# 18.线程切换的到底是什么

# 18.线程切换的到底是什么


线程切换指的是在操作系统中，当一个进程（或者线程）正在执行时，由于某种原因需要暂停当前进程（或者线程），并将CPU资源分配给其他进程（或者线程）执行。这个过程被称为上下文切换。



在进行线程切换时，操作系统会保存当前线程的上下文（包括寄存器、栈指针、程序计数器等信息），然后加载目标线程的上下文，并将CPU控制权转交给目标线程。当目标线程执行完毕后，再恢复之前被暂停的线程继续执行。



虽然看起来简单，但是由于每次切换都需要保存和恢复大量的信息，所以它会消耗一定的时间和资源。而且如果频繁地进行线程切换，还可能导致CPU缓存失效、竞争条件等问题，从而降低系统性能和稳定性。



因此，在编写多线程程序时应该尽量减少不必要的线程切换。例如可以使用同步机制（如锁、信号量等）来避免竞争条件；合理设置任务调度优先级来减少不必要的抢占；采用异步模型来避免阻塞等待等情况。



> 更新: 2024-04-19 15:32:41  
> 原文: <https://www.yuque.com/linuxer/gscfv1/9ba9651b33d2c4fe4ea099beb4507f09>