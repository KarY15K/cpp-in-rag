# 45.new可以重载吗，可以改写new函数吗

# 45.new可以重载吗，可以改写new函数吗


new可以被重载，并且可以通过改写new函数来实现自定义内存管理。



在C++中，重载运算符new和delete函数是实现自定义内存分配和释放的一种方式。通过重载这两个函数，可以控制对象的创建和销毁过程。当使用new运算符创建对象时，编译器会先调用new函数分配内存空间，然后再调用构造函数初始化对象；而在删除对象时，编译器会先调用析构函数释放资源，然后再调用delete函数释放内存空间。



因此，改写new函数可以实现以下功能：



1. 自定义内存分配策略：通过改变申请、释放内存大小和顺序等方式来优化程序性能。
2. 内存泄漏检测：记录每次申请的内存地址和大小，在程序退出前打印未被释放的内存信息。
3. 越界检查：在申请或者释放内存时进行越界检查以避免出现数组越界等错误。
4. 统计信息：记录程序中所有的申请和释放操作，并统计相关信息如总共分配了多少内存、最大分配量、平均值等等。



需要注意的是，在重载运算符new和delete时需要保证与标准库的兼容性。同时也需要注意不要破坏语言本身规定好的堆栈管理机制。



> 更新: 2024-04-19 15:30:51  
> 原文: <https://www.yuque.com/linuxer/gscfv1/5dfc25e02f342ed9901401e5e733eb95>