# 25.TCP 2MSL说一下，为什么

# 25.TCP 2MSL说一下，为什么


TCP 2MSL是指TCP连接关闭后，等待两倍的最大报文段生存时间（Maximum Segment Lifetime）后，才能释放该连接所占用的资源。这个时间通常为60秒左右。



TCP 2MSL存在的主要原因是防止网络上旧数据包延迟到达时被误认为是新连接，从而引起不必要的问题。当一个TCP连接关闭时，可以通过发送FIN、ACK和RST等控制报文告知对端关闭操作已完成。但由于各种因素，如网络拥堵、路由器故障或重传机制等，可能会导致已经关闭的连接在某些节点上仍然存在数据包滞留，并且可能被误认为是新连接。如果没有适当的延迟时间，这些旧数据包可能会干扰新建立的连接。



因此，在TCP 2MSL期间内维护该连接状态信息以便处理任何晚到达的报文段或复制报文段。在这段时间内如果收到了新的数据包，则需要重新开始计算2MSL时间，并持续等待更长的时间来确保所有延迟到达的数据都得到处理。



> 更新: 2024-04-19 15:33:44  
> 原文: <https://www.yuque.com/linuxer/gscfv1/fc0dc70b4c3efcec01fd0592700b3bfc>