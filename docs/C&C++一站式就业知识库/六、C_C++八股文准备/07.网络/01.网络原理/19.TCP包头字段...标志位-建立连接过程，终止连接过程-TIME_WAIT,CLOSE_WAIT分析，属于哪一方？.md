# 19.TCP 包头字段... 标志位- 建立连接过程，终止连接过程- TIME_WAIT, CLOSE_WAIT 分析，属于哪一方？

# 19.TCP 包头字段... 标志位-> 建立连接过程，终止连接过程-> TIME_WAIT, CLOSE_WAIT 分析，属于哪一方？


TCP包头中的标志位有URG（紧急数据）、ACK（确认）、PSH（推送）、RST（重置连接）、SYN（同步序号）和FIN（结束）。



建立连接过程中，客户端首先向服务器发送一个SYN标志位的TCP包，表示请求建立连接。服务器在收到该包后，会回复一个SYN+ACK的TCP包，表示已收到请求并同意建立连接。最后，客户端再回复一个ACK标志位的TCP包进行确认。



终止连接过程中，一方需要向另一方发送一个FIN标志位的TCP包来表示要关闭连接。接收到FIN标志位的一方会回复一个ACK标志位的TCP包进行确认，并进入CLOSE_WAIT状态或TIME_WAIT状态。如果是主动发起关闭连接的一方，则会进入TIME_WAIT状态；如果是被动响应关闭连接请求的一方，则会进入CLOSE_WAIT状态。



在TIME_WAIT和CLOSE_WAIT状态下，均属于被动响应关闭请求的一方。在这两个状态下，通信双方都不能发送新数据，但是仍然能够接收对方发送来的数据。在经过一定时间后，处于TIME_WAIT状态的一方才能彻底释放资源，并完成与对方断开连接；而处于CLOSE_WAIT状态的一方则需要等待对方最终关闭连接才能彻底释放资源。



> 更新: 2024-04-19 15:33:36  
> 原文: <https://www.yuque.com/linuxer/gscfv1/f7988bda3c341c712bef3415f4eb1437>