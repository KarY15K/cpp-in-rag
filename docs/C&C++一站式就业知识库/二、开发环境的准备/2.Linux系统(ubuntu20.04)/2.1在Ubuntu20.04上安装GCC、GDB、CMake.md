# 2.1 在 Ubuntu 20.04 上安装 GCC、GDB、CMake

默认的 Ubuntu [软件源](https://so.csdn.net/so/search?q=%E8%BD%AF%E4%BB%B6%E6%BA%90&spm=1001.2101.3001.7020)包含了一个软件包组，名称为 “build-essential”,它包含了 GNU 编辑器集合，GNU 调试器，和其他编译软件所必需的开发库和工具。



重点：

+ gcc/g++/gdb/make/cmake是C/C++开发必备的组件
+ cmake 手动安装，因为使用apt 命令安装的cmake版本比较低
+ gcc/g++如何编译和运行代码
+ gdb调试



# 1 安装gcc
想要安装开发工具[软件包](https://so.csdn.net/so/search?q=%E8%BD%AF%E4%BB%B6%E5%8C%85&spm=1001.2101.3001.7020)，以 拥有 sudo 权限用户身份或者 root 身份运行下面的命令：

```plain
sudo apt update
sudo apt install build-essential  
```

这个命令将会安装一系列软件包，包括gcc,g++,和make。

你可能还想安装关于如何使用 GNU/Linux开发的手册。

```plain
sudo apt-get install manpages-dev

```

通过运行下面的命令，打印 GCC 版本，来验证 GCC 编译器是否被成功地安装。

```plain
gcc --version
```

在 Ubuntu 20.04 软件源中 GCC 的默认可用版本号为9.3.0:

```plain
gcc (Ubuntu 9.3.0-10ubuntu2) 9.3.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

```

就这些。GCC 已经在你的 Ubuntu 系统上安装好了，你可以开始使用它了。



# 2 安装gdb
安装gdb，用来调试程序

```plain
sudo apt install gdb
```



查看版本：

```plain
gdb --version
```



# 3 CMake 安装
 

<font style="color:rgb(18, 18, 18);">cmake下载地址：</font>[Releases · Kitware/CMake](https://link.zhihu.com/?target=https%3A//github.com/Kitware/CMake/releases/)

 

<font style="color:rgb(18, 18, 18);">下载</font><font style="color:rgb(18, 18, 18);"> </font><font style="color:rgb(18, 18, 18);">cmake-3.29.5-linux-x86_64.sh</font>



```plain
# 在 ubuntu 下
wget https://github.com/Kitware/CMake/releases/download/v3.29.5/cmake-3.29.5-linux-x86_64.sh
# 执行权限的添加
chmod +x cmake-3.29.5-linux-x86_64.sh
```



<font style="color:rgb(18, 18, 18);">然后用 sh 文件快速升级：</font>



```plain
# 把cmake命令安装到/usr目录
sudo bash ./cmake-3.29.5-linux-x86_64.sh --skip-licence --prefix=/usr

# 安装过程中遇到：
# 选择1
Do you accept the license? [yn]: 
# 输入 y

# 选择2
By default the CMake will be installed in:
  "/usr/cmake-3.29.5-linux-x86_64"
Do you want to include the subdirectory cmake-3.29.5-linux-x86_64?
Saying no will install in: "/usr" [Yn]:
# 输入 n
```



<font style="color:rgb(18, 18, 18);">安装完成后，可以看到 cmake 版本已经更新</font>



```plain
$ cmake --version
cmake version 3.29.5
```





# 4 使用gcc、g++编译代码，gdb调试代码
## gcc
hello.c

```c
#include<stdio.h> 

int main(void)
{
    printf("Hello gcc\n");

    return 0;
}
```

<font style="color:rgb(77, 77, 77);">编译运行这个hello.c程序，生成可执行文件hello</font>

```c
$ gcc  hello.c -o hello
```

其中 -o 指定输出的可执行文件的名字

 

运行

```bash
$ ./hello
```

<font style="color:rgb(77, 77, 77);">./hello运行hello文件，输出"Hello gcc"</font>

<font style="color:rgb(77, 77, 77);"></font>

## g++
hello2.cpp

```c
#include <iostream>
using namespace std;
 
// main() 是程序开始执行的地方
 
int main()
{
   cout << "Hello g++"; // 输出 Hello g++
   return 0;
}
```



<font style="color:rgb(77, 77, 77);">编译运行这个hello2.cpp程序，生成可执行文件hello2</font>

```c
$ g++  hello2.cpp -o hello2
```

 运行

```bash
$ ./hello2
```

<font style="color:rgb(77, 77, 77);">./hello2运行hello2文件，输出"Hello g++"</font>

<font style="color:rgb(77, 77, 77);"></font>

## <font style="color:rgb(77, 77, 77);">gdb调试</font>
修改hello2.cpp 为

```bash
#include <iostream>
using namespace std;
 
 
int main()
{
   int *p = 0;
   *p = 1234;
   cout << "Hello g++"; // 输出 Hello g++
   return 0;
}
```

<font style="color:rgb(77, 77, 77);"></font>

<font style="color:rgb(77, 77, 77);">编译运行这个hello3.cpp程序，生成可执行文件hello3</font>

```c
$ g++  hello3.cpp -o hello3 -g
```

-g 目的是为了支持调试

 运行

```bash
$ ./hello2
```

<font style="color:rgb(77, 77, 77);">出现崩溃，可以使用gdb进行调试</font>

```bash
$ gdb ./hello2
```

输入r 即可运行，这里只是gdb的简单演示，具体如何使用持续关注老廖。





# 5 升级更高版本的编译器
参考：[如何在 Ubuntu 中安装和切换多版本 GCC 编译器 - 系统极客](https://www.sysgeek.cn/ubuntu-install-gcc-compiler/)

初学者不建议升级太高版本的编译器，在环境上折腾太多时间不值得。





> 更新: 2024-09-10 19:47:39  
> 原文: <https://www.yuque.com/linuxer/gscfv1/gd4pkhpfbd9687d9>